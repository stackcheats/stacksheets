---
title: 'Filter Mediator'
intro: 'Using Filter Mediator to Filter Request Headers'
category: WSO2
tags: ['wso2', 'wso2-api-manager', 'synapse-sequence']
author: Athiththan
weight: -1
updated: 2019-09-08
date: '2019-11-15T16:25:00.284Z'
cheat: true
seo: 'A simple guide to use Filter mediators to filter request headers on WSO2 Servers including WSO2 API Manager'
keywords: ['Filter Mediator', 'WSO2 API Manager', 'Filter request headers']
---

import CodeWave from 'components/codecomponents/CodeWave'

# Stratagem

A Quick-Peak on using `Filter` mediators to filter and execute custom executions based on presented request header.

For example, check for the `mycustomheader` header value in the request and print the value using `Log` mediator.

<CodeWave metastring='{}'>

```markdown
    <?xml version="1.0" encoding="UTF-8"?>

    <sequence name="custom-sequence" 
      xmlns="http://ws.apache.org/ns/synapse">
      <filter>
        <then></then>
        <else></else>
      </filter>
    </sequence>
```

Given is a simple Synapse sequence with a `Filter` mediator skeleton.

```markdown
    <sequence name="custom-sequence" 
      xmlns="http://ws.apache.org/ns/synapse">
      <filter 
        source="get-property('mycustomheader', 'transport')">
        <then></then>
        <else></else>
      </filter>
    </sequence>
```

We can use the `get-property()` method to access and retrieve properties from the Synapse context. 
We will be using `get-property('mycustomheader', 'transport')` to retrieve our `mycustomheader` value from the Synapse context using the scope as `transport`.

```markdown
    <sequence name="custom-sequence" 
      xmlns="http://ws.apache.org/ns/synapse">
      <filter 
        source="get-property('mycustomheader', 'transport')">
        <then>
          <log level="custom">
            <property 
              name="message" 
              value="Header is presented" />
          </log>
        </then>
        <else>
          <log level="custom">
            <property 
              name="message" 
              value="Header is not presented" />
          </log>
        </else>
      </filter>
    </sequence>
```

Next we will add some `Log` mediators in both `then` and `else` sections of the `Filter` mediator to print and log success and failure messages.

```markdown
    <sequence name="custom-sequence" 
      xmlns="http://ws.apache.org/ns/synapse">
      <filter 
        source="get-property('mycustomheader', 'transport')">
        <then>
          <log level="custom">
            <property 
              name="message" 
              value="Header is presented" />
          </log>
        </then>
        <else>
          <log level="custom">
            <property 
              name="message" 
              value="Header is not presented" />
          </log>
        </else>
      </filter>
    </sequence>
```

Now we have successfully written and modified our code to capture and retrieve the `someHeaders` value from the request headers. We will now print some custom message on success as well as on failure methods to prompt in the carbon logs

</CodeWave>

Given below is the complete sample Synapse sequence (`in-sequence`) used to filter request Headers using `Filter` mediator

```xml
<sequence name="custom-sequence" xmlns="http://ws.apache.org/ns/synapse">
    <filter source="get-property('mycustomheader', 'transport')">
        <then>
            <log level="custom">
                <property name="message" value="Header is presented" />
            </log>
        </then>
        <else>
            <log level="custom">
                <property name="message" value="Header is not presented" />
            </log>
        </else>
    </filter>
</sequence>
```
